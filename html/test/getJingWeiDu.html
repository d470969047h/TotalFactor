<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>显示点击位置的经纬度</title>
</head>
<link href="../js/v3.16.0-dist/ol.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/v3.16.0-dist/ol.js" charset="utf-8"></script>
<body>
<div id="map" style="width: 100%"></div>

<script type="text/javascript">
    var map = new ol.Map({
        layers: [
            new ol.layer.Tile({
                source: new ol.source.OSM()
            })
        ],
        target: 'map',
        view: new ol.View({
            center: ol.proj.transform(
                    [104, 30], 'EPSG:4326', 'EPSG:3857'),
            zoom: 10
        })
    });

/*    // 使用once函数，只会响应一次事件，之后自动注销事件监听
    map.once('singleclick', function(event){
        alert('大家好，我是淡叔，这是一个演示如何取消事件监听的应用，之后再点击地图时，你将不会再看到这个说明。');
    })*/

/*    var key = map.on('singleclick', function(event){
        alert('大家好，我是淡叔，这是一个演示如何取消事件监听的应用，之后再点击地图时，你将不会再看到这个说明。');
        // 下面这行代码就是取消事件监听
        map.unByKey(key);
    });*/

    // 监听singleclick事件
    map.on('singleclick', function(event){
        // 通过getEventCoordinate方法获取地理位置，再转换为wgs84坐标，并弹出对话框显示
        console.info(ol.proj.transform(map.getEventCoordinate(event), 'EPSG:3857', 'EPSG:4326'));
    })

</script>


</body>
</html>


















